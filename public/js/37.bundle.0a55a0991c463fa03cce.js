(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{953:function(e,t,a){"use strict";a.r(t);var l=a(4),n=a.n(l),r=a(31),i=a.n(r),u=a(0),c=a.n(u),s=a(2),o=a.n(s),m=a(21),f=a(28),b=a(915),p=a(916),g=a(887),y=a(917),v=a(918),d=a(919),E=a(920),h=a(921),L=a(922),w=a(62),O=a.n(w),q=a(148),j=a(147),k=a(872),N=a(871),T=function(e){var t={name:"filterValue",id:"filterValue",label:Lang.get("table.filter_value_label"),variant:"outlined"};return"numeric"===e.columntype?c.a.createElement(m.ib,n()({type:"number"},t,e,{placeholder:Lang.get("table.numeric_value_placeholder")})):"date"===e.columntype?c.a.createElement(k.b,{utils:N.a},c.a.createElement(k.a,n()({},t,{value:e.value,onChange:function(t){return e.set("filterValue",t)},className:e.className,variant:"outlined",format:"YYYY-MM-DD",keyboard:!0,clearable:!0,disableFuture:!0}))):c.a.createElement(m.ib,n()({},t,e,{placeholder:Lang.get("table.string_value_placeholder")}))},B=function(e){var t=e.classes,a=e.errors,l=e.columns,r=e.onFilter,i={numeric:[{label:Lang.get("table.eqs"),value:"eqs"},{label:Lang.get("table.neqs"),value:"neqs"},{label:Lang.get("table.gt"),value:"gt"},{label:Lang.get("table.lt"),value:"lt"},{label:Lang.get("table.gte"),value:"gte"},{label:Lang.get("table.lte"),value:"lte"}],boolean:[{label:Lang.get("table.eqs"),value:"eqs"},{label:Lang.get("table.neqs"),value:"neqs"}],date:[{label:Lang.get("table.eqs"),value:"eqs"},{label:Lang.get("table.neqs"),value:"neqs"},{label:Lang.get("table.gt"),value:"gt"},{label:Lang.get("table.lt"),value:"lt"},{label:Lang.get("table.gte"),value:"gte"},{label:Lang.get("table.lte"),value:"lte"}],string:[{label:Lang.get("table.like"),value:"like"},{label:Lang.get("table.nlike"),value:"nlike"},{label:Lang.get("table.eqs"),value:"eqs"},{label:Lang.get("table.neqs"),value:"neqs"}]},u=function(e){var t=l.find((function(t){return t.property===e}));return t&&!t.hasOwnProperty("type")?"string":t.type};return c.a.createElement(q.b,{initialValues:{filterBy:"",filterType:"",filterValue:""},onSubmit:function(e,t){var a={},l=Object.values(e);Object.keys(e).forEach((function(e,t){"object"===O()(l[t])&&l[t].hasOwnProperty("_isAMomentObject")?a[e]=moment(l[t]).format("YYYY-MM-DD"):a[e]=l[t]})),r(a,t)},validationSchema:j.object().shape({filterBy:j.string().required("You must select a column.")})},(function(e){var r=e.values,s=e.handleChange,o=e.setFieldValue,f=e.errors,b=e.isSubmitting;return a&&Object.keys(a).length>0&&(f=a),c.a.createElement(q.a,{className:t.form},c.a.createElement(m.s,{variant:"outlined",className:t.input,error:f.hasOwnProperty("filterBy")},c.a.createElement(m.C,{htmlFor:"filterBy"},Lang.get("table.filter_by_label")),c.a.createElement(m.R,{value:r.filterBy,onChange:function(e){r.filterBy&&o("filterType",""),s(e)},name:"filterBy",id:"filterBy",input:c.a.createElement(m.N,{labelWidth:55})},l.map((function(e,t){return c.a.createElement(m.K,{key:t,value:e.property},e.name)}))),f.hasOwnProperty("filterBy")&&c.a.createElement(m.t,null,f.filterBy)),r.filterBy&&c.a.createElement(m.s,{variant:"outlined",className:t.input,error:f.hasOwnProperty("filterType")},c.a.createElement(m.C,{htmlFor:"filterType"},Lang.get("table.filter_type_label")),c.a.createElement(m.R,{value:r.filterType,onChange:function(e){"date"===u(r.filterBy)?o("filterValue",moment().format("YYYY-MM-DD")):o("filterValue",""),s(e)},name:"filterType",id:"filterType",input:c.a.createElement(m.N,{labelWidth:65})},i[u(r.filterBy)].map((function(e,t){return c.a.createElement(m.K,{key:t,value:e.value},e.label)}))),f.hasOwnProperty("filterType")&&c.a.createElement(m.t,null,f.filterType)),r.filterBy&&r.filterType&&c.a.createElement(T,n()({columntype:u(r.filterBy),className:t.input,value:r.filterValue,onChange:s},"date"===u(r.filterBy)?{set:o}:{},{error:f.hasOwnProperty("filterValue"),helperText:f.hasOwnProperty("filterValue")&&f.filterValue})),c.a.createElement(m.s,{className:t.input},c.a.createElement(m.c,{type:"submit",variant:"contained",color:"primary",disabled:f&&Object.keys(f).length>0||b},Lang.get("table.add_filter"))))}))};B.propTypes={classes:o.a.object,errors:o.a.object,setErrors:o.a.func,columns:o.a.array.isRequired,onFilter:o.a.func},B=Object(f.withStyles)((function(e){return{form:{display:"flex",flexWrap:"wrap"},input:{margin:e.spacing.unit,minWidth:200}}}),{withTheme:!0})(B);var _=B=Object(q.c)({})(B);function V(e){var t=Object(u.useState)(!1),a=i()(t,2),l=a[0],r=a[1],s=function(e){switch(e){case"eqs":return c.a.createElement(b.a,null);case"neqs":return c.a.createElement(p.a,null);case"gt":return c.a.createElement(g.a,null);case"lt":return c.a.createElement(y.a,null);case"gte":return c.a.createElement(v.a,null);case"lte":return c.a.createElement(d.a,null);case"like":return c.a.createElement(E.a,null);case"nlike":return c.a.createElement(h.a,null)}},o=e.classes,f=e.title,w=e.columns,O=e.filters,q=e.onFilter,j=e.onFilterRemove,k=Object.values(O),N=w.filter((function(e){return!e.hasOwnProperty("filter")||e.filter})),T=null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.jb,null,c.a.createElement("div",{className:o.title},c.a.createElement(m.lb,{variant:"h6",id:"tableTitle"},f)),c.a.createElement("div",{className:o.spacer}),c.a.createElement("div",{className:o.actions},c.a.createElement(m.kb,{title:Lang.get("table.filter_list")},c.a.createElement("div",{className:o.filterMenuWrapper},c.a.createElement(m.y,{"aria-label":Lang.get("table.filter_list"),"aria-haspopup":"true",buttonRef:function(e){return T=e},onClick:function(){r(!l)}},c.a.createElement(L.a,null)),c.a.createElement(m.P,{open:l,anchorEl:T,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return c.a.createElement(m.v,n()({},t,{id:"menu-list-grow",style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),c.a.createElement(m.O,{className:o.filterMenu},c.a.createElement(_,{columns:N,onFilter:q})))})))))),Object.values(O).length>0&&c.a.createElement(m.jb,null,Object.keys(O).map((function(e,t){return c.a.createElement("div",{key:t,className:o.filter},c.a.createElement(m.lb,{className:o.filterName},w.find((function(t){return t.property===e.substr(0,e.indexOf("["))})).name),c.a.createElement(m.e,{icon:s(e.match(/\[(.*)\]/).pop()),label:k[t],onDelete:function(){return j(e)}}))}))))}V.propTypes={title:o.a.string.isRequired,columns:o.a.array.isRequired,filters:o.a.object,filterMenuVisible:o.a.bool,onFilter:o.a.func,onFilterRemove:o.a.func};t.default=Object(f.withStyles)((function(e){return{title:{flex:"0 0 auto"},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},filterMenuWrapper:{position:"relative",display:"inline-block"},filterMenu:{position:"absolute",padding:16,right:0,zIndex:999},filter:{display:"flex",flexWrap:"no-wrap",flexDirection:"row",alignItems:"center",margin:e.spacing.unit/2},filterName:{marginRight:4}}}),{withTheme:!0})(V)}}]);