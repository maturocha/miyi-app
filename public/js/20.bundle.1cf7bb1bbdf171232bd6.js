(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{878:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),i=r(9),s=r.n(i),l=r(62),o=r.n(l),c=r(35),u=r.n(c),d=r(54),m=r.n(d),p=r(31),f=r.n(p),h=r(5),b=r.n(h),g=r(0),y=r.n(g),O=r(148),v=r(147),E=r(21),w=r(28),P=r(873),j=r(872),x=r(61),D=r(941),k=r(43);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(r,!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=Object(w.withStyles)((function(e){return{form:{padding:3*e.spacing.unit,minHeight:"100%"},dense:{marginTop:16},spinner:{marginRight:e.spacing.unit}}}))((function(e){var t=Object(g.useContext)(k.a).user,r=e.classes,n=b()(e,["classes"]),i=e.location,s=Object(g.useState)(!1),l=f()(s,2),c=l[0],d=l[1],p=Object(g.useState)({}),h=f()(p,2),w=h[0],Y=h[1],C=Object(g.useState)(!1),L=f()(C,2),M=L[0],W=L[1],T=function(){var e=m()(u.a.mark((function e(t,r){var n,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.setSubmitting,a=r.setErrors,n(!1),i=function(){return axios.patch("/api/v1/settings/profile",t)},e.prev=3,d(!0),e.next=7,i();case 7:Y({type:"success",body:Lang.get("settings.profile_updated"),closed:function(){return Y({})}}),d(!1),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(3),e.t0.response){e.next=15;break}return e.abrupt("return");case 15:(s=e.t0.response.data.errors)?a(s):Y({type:"error",body:Lang.get("settings.profile_not_updated"),closed:function(){return Y({})},actionText:Lang.get("actions.retry"),action:function(){var e=m()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),d(!1);case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,r){return e.apply(this,arguments)}}();Object(g.useEffect)((function(){var e=x.a(i.search);e.hasOwnProperty("visible")?W(!0):e.hasOwnProperty("hidden")&&W(!1)}));var F=y.a.createElement(E.v,{item:!0,md:8,sm:12,xs:12},y.a.createElement(E.P,{className:r.form},y.a.createElement(O.b,{initialValues:{firstname:t.firstname,middlename:t.middlename,lastname:t.lastname,gender:t.gender,birthdate:t.birthdate,address:t.address},validationSchema:v.object().shape({firstname:v.string().required(Lang.get("validation.required",{attribute:"firstname"})),lastname:v.string().required(Lang.get("validation.required",{attribute:"lastname"}))}),onSubmit:function(){var e=m()(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=Object.values(t),Object.keys(t).forEach((function(e,t){null!==a[t]&&"object"===o()(a[t])&&a[t].hasOwnProperty("_isAMomentObject")?n[e]=moment(a[t]).format("YYYY-MM-DD"):n[e]=a[t]})),e.next=5,T(n,r);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),validateOnBlur:!1},(function(e){var t=e.values,n=e.errors,a=e.submitCount,i=e.isSubmitting,s=e.handleChange,l=e.setFieldValue;return y.a.createElement(O.a,null,y.a.createElement(E.mb,{variant:"h6",gutterBottom:!0},"Personal Information"),y.a.createElement(E.jb,{id:"firstname",name:"firstname",label:"First Name",placeholder:"Enter your firstname",value:t.firstname,onChange:s,fullWidth:!0,margin:"dense",error:a>0&&n.hasOwnProperty("firstname"),helperText:a>0&&n.hasOwnProperty("firstname")&&n.firstname}),y.a.createElement(E.jb,{id:"middlename",name:"middlename",label:"Middle Name",placeholder:"Enter your middlename",value:t.middlename,onChange:s,fullWidth:!0,margin:"dense",error:a>0&&n.hasOwnProperty("middlename"),helperText:a>0&&n.hasOwnProperty("middlename")&&n.middlename}),y.a.createElement(E.jb,{id:"lastname",name:"lastname",label:"Last Name",placeholder:"Enter your lastname",value:t.lastname,onChange:s,fullWidth:!0,margin:"dense",error:a>0&&n.hasOwnProperty("lastname"),helperText:a>0&&n.hasOwnProperty("lastname")&&n.lastname}),y.a.createElement(E.t,{fullWidth:!0,margin:"dense",error:a>0&&n.hasOwnProperty("gender")},y.a.createElement(E.D,{htmlFor:"gender"},"Gender"),y.a.createElement(E.S,{id:"gender",name:"gender",value:t.gender,onChange:s,input:y.a.createElement(E.A,{fullWidth:!0}),autoWidth:!0},y.a.createElement(E.L,{value:""},"Please select the gender"),y.a.createElement(E.L,{value:"female"},"Female"),y.a.createElement(E.L,{value:"male"},"Male")),a>0&&n.hasOwnProperty("gender")&&y.a.createElement(E.u,null,n.gender)),y.a.createElement(E.t,{fullWidth:!0,margin:"dense",error:a>0&&n.hasOwnProperty("birthdate")},y.a.createElement(P.b,{utils:j.a},y.a.createElement(P.a,{id:"birthdate",name:"birthdate",label:"Birthdate",placeholder:"Please pick your birthdate",value:t.birthdate,onChange:function(e){return l("birthdate",e)},format:"YYYY-MM-DD",maxDate:moment().subtract(10,"y").subtract(1,"d").format("YYYY-MM-DD"),keyboard:!0,clearable:!0,disableFuture:!0})),a>0&&n.hasOwnProperty("birthdate")&&y.a.createElement(E.u,null,n.birthdate)),y.a.createElement(E.jb,{id:"address",name:"address",label:"Address",placeholder:"Enter your address",value:t.address,onChange:s,fullWidth:!0,multiline:!0,rows:3,margin:"dense",error:a>0&&n.hasOwnProperty("address"),helperText:a>0&&n.hasOwnProperty("address")&&n.address}),y.a.createElement("div",{className:r.dense}),y.a.createElement(E.c,{type:"submit",variant:"contained",color:"primary",disabled:n&&Object.keys(n).length>0&&a>0||i},c&&y.a.createElement("div",{className:r.spinner},y.a.createElement(E.f,{size:14,color:"inherit"})),y.a.createElement(E.mb,{color:"inherit"},"Update")))})))),N=y.a.createElement(D.c,{navigationProps:S({},n,{formVisible:M,setFormVisibility:function(){return W(!M)}})},y.a.createElement(E.x,{mdUp:!0},M&&F),y.a.createElement(E.x,{smDown:!0},F)),q=M?D.d:D.a;return y.a.createElement(q,a()({},n,{pageTitle:"Profile",message:w}),N)}))},941:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return l}));var n=r(22),a=Object(n.a)((function(){return r.e(6).then(r.bind(null,954))})),i=Object(n.a)((function(){return r.e(7).then(r.bind(null,955))})),s=Object(n.a)((function(){return r.e(37).then(r.bind(null,956))})),l=Object(n.a)((function(){return Promise.all([r.e(0),r.e(14)]).then(r.bind(null,957))}))}}]);