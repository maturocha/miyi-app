(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{938:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c}));var a=n(22),r=Object(a.a)((function(){return n.e(6).then(n.bind(null,941))})),l=Object(a.a)((function(){return Promise.all([n.e(1),n.e(7)]).then(n.bind(null,942))})),o=Object(a.a)((function(){return n.e(37).then(n.bind(null,943))})),c=Object(a.a)((function(){return Promise.all([n.e(0),n.e(22)]).then(n.bind(null,944))}))},958:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o}));var a=n(22),r=Object(a.a)((function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,964))})),l=Object(a.a)((function(){return Promise.all([n.e(0),n.e(38)]).then(n.bind(null,965))})),o=Object(a.a)((function(){return Promise.all([n.e(0),n.e(39)]).then(n.bind(null,966))}))},980:function(e,t,n){"use strict";n.r(t);var a=n(49),r=n.n(a),l=n(4),o=n.n(l),c=n(5),i=n.n(c),u=n(9),m=n.n(u),s=(n(35),n(54),n(31)),p=n.n(s),d=n(0),b=n.n(d),f=n(21),E=n(28),g=n(207),h=n.n(g),y=n(208),x=n.n(y),v=n(149),O=n.n(v),j=n(210),_=n.n(j),N=(n(105),n(940),n(203)),w=n(938),C=n(58),P=n.n(C),S=n(50),D=n.n(S),F=n(876),T=n.n(F),k=n(894),z=n(895),R=n(896),W=n(897),q=n(898),I=n(899),B=n(958);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=Object(E.withStyles)((function(e){var t;return{pageContentWrapper:{width:"100%",marginTop:3*e.spacing.unit,minHeight:"75vh",overflowX:"auto"},table:{margin:"8px 0"},cell:{padding:"8px 4px"},cell_subtotal:{padding:"8px 4px !important",display:"flex",flexDirection:"column",textAlign:"center",fontSize:e.typography.pxToRem(14)},pageContent:{padding:3*e.spacing.unit},panelDetails:{flexDirection:"column",padding:"8px 4px"},panelDetailsRow:(t={flexDirection:"column"},m()(t,e.breakpoints.up("md"),{flexDirection:"row"}),m()(t,"padding","8px 4px"),t),selectNative:{display:"block"},gridButtonsFooter:{margin:"8px",width:"auto",alignItems:"center"},panelTotal:{backgroundColor:"rgb(9 202 0 / 12%)",opacity:"unset !important"},root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(18),flexBasis:"90%",flexShrink:0,fontWeight:500,marginLeft:"8px"},headingTotal:{fontSize:e.typography.pxToRem(18),fontWeight:"bold"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}))((function(e){var t=Object(d.useState)(!1),n=p()(t,2),a=n[0],l=(n[1],Object(d.useState)([])),c=p()(l,2),u=(c[0],c[1],Object(d.useState)({})),s=p()(u,2),E=s[0],g=s[1],y=Object(d.useState)(null),v=p()(y,2),j=(v[0],v[1],Object(d.useState)("customer")),C=p()(j,2),S=C[0],F=C[1],M=(Object(d.useRef)(!0),e.history,Object(d.useState)("?")),H=p()(M,2),J=H[0],A=(H[1],Object(d.useState)(null)),L=p()(A,2),X=L[0],G=L[1],K=Object(d.useState)([]),Q=p()(K,2),U=Q[0],V=Q[1],Y=Object(d.useState)({total_bruto:0,total:0,delivery_cost:"",discount:"",payment_method:""}),Z=p()(Y,2),ee=Z[0],te=Z[1];Object(d.useEffect)((function(){}),[]),Object(d.useEffect)((function(){ee.total_bruto>0&&ne()}),[ee.total_bruto]),Object(d.useEffect)((function(){ee.total_bruto>0&&ee.discount>0&&ne(!1)}),[ee.discount]),Object(d.useEffect)((function(){"ef"==ee.payment_method&&"p"==X.type&&te((function(e){return $({},e,{discount:10})}))}),[ee.payment_method]);var ne=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=ee.total_bruto,n=ee.delivery_cost;parseFloat(ee.discount)&&(t-=ee.discount*t/100),e&&(n=t<1500&&"p"==X.type?150:0,t+=n),t!=ee.total&&te((function(e){return $({},e,{total:Number(t.toFixed(2)),delivery_cost:n})}))},ae=function(e){return function(t,n){F(!!n&&e)}},re=function(e){G(e),F("items")},le=function(e,t){te((function(n){return $({},n,m()({},e.name,"number"==t?Number(e.value):e.value))}))},oe=e.classes,ce=i()(e,["classes"]),ie=function(e){te((function(t){return $({},t,{total_bruto:Number((parseFloat(t.total_bruto)-parseFloat(U[e].price_final)).toFixed(2))})})),V((function(t){return t.splice(e,1),r()(t)}))},ue=function(e){V((function(t){return t.push(e),r()(t)})),te((function(t){return $({},t,{total_bruto:Number((parseFloat(t.total_bruto)+parseFloat(e.price_final)).toFixed(2))})})),g({type:"success",body:'"'+e.name+'" agregado',closed:function(){return g({})}})};return b.a.createElement(w.b,o()({},ce,{pageTitle:"Nuevo Pedido # ".concat(J),tabs:[],message:E,showBreadcrumbs:!1}),b.a.createElement("div",{className:oe.pageContentWrapper},a&&b.a.createElement(N.b,null),b.a.createElement(f.p,{expanded:"customer"===S,onChange:ae("customer")},b.a.createElement(f.r,{expandIcon:b.a.createElement(k.a,null)},b.a.createElement(z.a,null),b.a.createElement(f.mb,{className:oe.heading},X?X.name:"Cliente")),b.a.createElement(f.q,{className:oe.panelDetails},b.a.createElement(B.a,o()({},ce,{customer:X,setCustomer:re})))),b.a.createElement(f.p,{expanded:"items"===S,onChange:ae("items")},b.a.createElement(f.r,{expandIcon:b.a.createElement(k.a,null)},b.a.createElement(R.a,null),b.a.createElement(f.mb,{className:oe.heading},"Productos ($",ee.total_bruto?ee.total_bruto:"0.00",")")),b.a.createElement(f.q,{className:oe.panelDetails},b.a.createElement(h.a,{className:oe.table},b.a.createElement(x.a,null,U.map((function(e,t){return b.a.createElement(_.a,{key:e.quantity},b.a.createElement(O.a,{scope:"row",className:oe.cell},e.name," ",b.a.createElement("br",null),e.quantity," x ",e.price_unit," ",b.a.createElement("br",null),e.discount," %"),b.a.createElement(O.a,{className:oe.cell_subtotal},b.a.createElement(D.a,{className:oe.button,"aria-label":"Delete",onClick:function(){return ie(t)}},b.a.createElement(T.a,null)),b.a.createElement("b",null,"$ ",e.price_final)))})))),b.a.createElement(B.b,o()({typePrice:X?X.type:"m",total:ee.total,addItemsToOrder:ue},ce)))),b.a.createElement(f.p,{expanded:"extras"===S,onChange:ae("extras")},b.a.createElement(f.r,{expandIcon:b.a.createElement(k.a,null)},b.a.createElement(W.a,null),b.a.createElement(f.mb,{className:oe.heading},"Extras")),b.a.createElement(f.q,{className:oe.panelDetailsRow},b.a.createElement(f.u,{item:!0,xs:12,sm:4},b.a.createElement(f.C,{shrink:!0,htmlFor:"payment_method"},"Método de pago"),b.a.createElement(f.N,{onChange:function(e){return le(e.target,"text")},className:oe.selectNative,value:ee.payment_method,input:b.a.createElement(f.z,{name:"payment_method"})},b.a.createElement("option",{value:""},"No definido"),b.a.createElement("option",{value:"ef"},"Efectivo"),b.a.createElement("option",{value:"trans"},"Transferencia"),b.a.createElement("option",{value:"mp"},"Mercado Pago"))),b.a.createElement(f.u,{item:!0,xs:12,sm:4},b.a.createElement(f.C,{htmlFor:"discount"},"Descuento %"," ",b.a.createElement("span",null)),b.a.createElement(f.z,{name:"discount",type:"number",min:1,step:1,max:100,value:ee.discount,onChange:function(e){return le(e.target,"number")},fullWidth:!0})),b.a.createElement(f.u,{item:!0,xs:12,sm:4},b.a.createElement(f.C,{htmlFor:"delivery_cost"},"Costo de envío",b.a.createElement("span",null)),b.a.createElement(f.z,{name:"delivery_cost",type:"number",value:ee.delivery_cost,onChange:function(e){return t=e.target,te((function(e){return $({},e,m()({},t.name,Number(t.value)))})),void ne(!1);var t},fullWidth:!0})))),b.a.createElement(f.p,{expanded:"comments"===S,onChange:ae("comments")},b.a.createElement(f.r,{expandIcon:b.a.createElement(k.a,null)},b.a.createElement(q.a,null),b.a.createElement(f.mb,{className:oe.heading},"Comentarios del pedido")),b.a.createElement(f.q,{className:oe.panelDetails},b.a.createElement(f.u,{item:!0,xs:12,sm:12},b.a.createElement(f.jb,{name:"comments",onChange:function(e){return le(e.target,"text")},label:"Comentario",multiline:!0,fullWidth:!0,variant:"outlined",rowsMax:8})))),b.a.createElement(f.p,{disabled:!0,className:oe.panelTotal},b.a.createElement(f.r,{className:oe.panelTotal},b.a.createElement(I.a,null),b.a.createElement(f.mb,{className:oe.headingTotal},"Total pedido: $",ee.total))),b.a.createElement(f.u,{container:!0,className:oe.gridButtonsFooter,spacing:24},b.a.createElement(f.u,{item:!0,xs:6},b.a.createElement(P.a,{variant:"contained",color:"primary"},"Finalizar Pedido")),b.a.createElement(f.u,{item:!0,xs:6},b.a.createElement(P.a,{variant:"contained",color:"secondary"},"Cancelar Pedido")))))}))}}]);