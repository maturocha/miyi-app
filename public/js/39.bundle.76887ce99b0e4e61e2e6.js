(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{966:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),l=n(35),c=n.n(l),o=n(54),i=n.n(o),u=n(31),s=n.n(u),m=n(0),p=n.n(m),f=(n(2),n(58)),d=n.n(f),b=n(211),E=n.n(b),g=n(123),h=n.n(g),v=n(128),y=n.n(v),O=n(129),x=n.n(O),w=n(212),j=n.n(w),S=n(213),C=n.n(S),k=n(206),P=n.n(k),_=n(37),F=n.n(_),q=n(99),N=n.n(q),T=n(50),D=n.n(T),W=n(29),A=n.n(W),B=n(881),z=n.n(B),$=n(21),I=n(882),J=n.n(I),G=n(940),H=n(880),K=n(28);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=e.classes,n=(e.value,e.typePrice),a=e.addItemsToOrder,r=e.total,l=Object(m.useState)(""),o=s()(l,2),u=(o[0],o[1],Object(m.useState)(!1)),f=s()(u,2),b=f[0],g=f[1],v=Object(m.useState)(""),O=s()(v,2),w=(O[0],O[1]),S=Object(m.useState)(null),k=s()(S,2),_=k[0],q=k[1],T=Object(m.useState)(null),W=s()(T,2),B=W[0],I=W[1],K=Object(m.useState)(""),L=s()(K,2),Q=L[0],R=L[1],U=Object(m.useState)(0),V=s()(U,2),X=V[0],Y=V[1],Z=Object(m.useState)(0),ee=s()(Z,2),te=ee[0],ne=ee[1],ae=Object(m.useState)({}),re=s()(ae,2),le=re[0],ce=re[1];Object(m.useEffect)((function(){var e=setTimeout((function(){if(!Q)return R(""),oe(),null;var e=Q,t=1==B.own_product?parseFloat(B.stock):1e8,n=Q%B.interval_quantity;Q<=t&&0!=n?e=Q-n:Q>t&&(e=t),e!=Q&&R(e),oe()}),750);return function(){return clearTimeout(e)}}),[Q]),Object(m.useEffect)((function(){X>0&&oe()}),[X]);var oe=function(){if(!B)return null;var e=0,t="m"==n?B.price_unit:B.price_min;parseFloat(Q)&&(e=Q*t),parseFloat(X)&&(e-=X*Q*t/100),ne(e.toFixed(2))},ie=function(){g(!0)},ue=function(){g(!1)},se=function(){var e=i()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(t),e.next=3,G.e.show(t.value);case 3:n=e.sent,I(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=i()(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<3)){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,G.e.paginated({search:t});case 5:return n=e.sent,a=n.data.map((function(e){return{value:e.id,label:e.text}})),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:ie},"+ Agregar productos"),p.a.createElement(h.a,{fullScreen:!0,onClose:ie,open:b,"aria-labelledby":"form-dialog-title"},p.a.createElement(E.a,{className:t.appBar},p.a.createElement(N.a,null,p.a.createElement(D.a,{color:"inherit",onClick:ue,"aria-label":"Close"},p.a.createElement(z.a,null)),p.a.createElement(A.a,{variant:"h6",color:"inherit",className:t.flex},"Agregar Productos"),p.a.createElement(d.a,{color:"inherit",onClick:ue},"Terminar"))),p.a.createElement(C.a,{id:"form-dialog-title"},"Productos"),p.a.createElement(x.a,null,p.a.createElement(j.a,null),p.a.createElement(H.a,{autoFocus:!0,cacheOptions:!0,defaultOptions:!0,value:_,loadOptions:me,onInputChange:function(e){w(e)},onChange:se,placeholder:"Busque un producto"}),B&&p.a.createElement(P.a,{container:!0,className:t.grid,spacing:24},p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Stock: ",1==B.own_product?B.stock:"âˆž"," ")),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Se vende por: ",B.interval_quantity)),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Bulto: ",B.bulto)),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Precio: $","m"==n?B.price_unit:B.price_min)),p.a.createElement(P.a,{item:!0,xs:12,sm:5},p.a.createElement($.C,{htmlFor:"quantity"},"Cantidad"," ",p.a.createElement("span",null)),p.a.createElement($.z,{error:!!le.quantity,name:"quantity",type:"number",value:Q,onChange:function(e){return R(e.target.value)},fullWidth:!0})),p.a.createElement(P.a,{item:!0,xs:12,sm:5},p.a.createElement($.C,{htmlFor:"discount"},"Descuento %"," ",p.a.createElement("span",null)),p.a.createElement($.z,{name:"discount",type:"number",min:1,step:1,max:100,value:X,onChange:function(e){return Y(e.target.value)},fullWidth:!0})),p.a.createElement(P.a,{item:!0,xs:12,sm:5},p.a.createElement("h3",null,"Subtotal: $ ",te," ")),p.a.createElement(P.a,{item:!0,xs:12,sm:2},p.a.createElement(d.a,{fullWidth:!0,variant:"contained",color:"primary",size:"large",onClick:function(){if(te<=0)return ce(M({},le,{subtotal:!0})),null;if(Q<=0||""==Q)return ce(M({},le,{quantity:!0})),null;I(null),q(null),R(""),Y(""),ne(0);var e={name:B.name,quantity:Q,discount:X,price_unit:"m"==n?B.price_unit:B.price_min,price_final:te};a(e)}},p.a.createElement(J.a,null),"Agregar")))),p.a.createElement(y.a,{className:t.dialogFooter},p.a.createElement("h3",null,"Total pedido: $ ",r," "))))};Q.propTypes={};t.default=Object(K.withStyles)((function(e){return{appBar:{position:"relative"},dialogFooter:{margin:0,justifyContent:"center",backgroundColor:e.palette.text.secondary,color:"white",padding:"16px 4px"},flex:{flex:1},formControl:{minWidth:"100%"},grid:{margin:"4px -12px",width:"unset"},info:{padding:"4px",textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",fontWeight:"bold"},required:{color:e.palette.error.main}}}))(Q)}}]);