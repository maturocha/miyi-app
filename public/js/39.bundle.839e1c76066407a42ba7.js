(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{969:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),l=a(35),o=a.n(l),c=a(54),i=a.n(c),u=a(31),s=a.n(u),m=a(0),p=a.n(m),f=(a(2),a(58)),d=a.n(f),b=a(211),E=a.n(b),g=a(124),h=a.n(g),v=a(129),y=a.n(v),O=a(130),x=a.n(O),w=a(212),j=a.n(w),C=a(213),S=a.n(C),k=a(210),P=a.n(k),_=a(37),F=a.n(_),q=a(99),N=a.n(q),D=a(50),A=a.n(D),T=a(29),W=a.n(T),B=a(883),$=a.n(B),I=a(21),J=a(884),z=a.n(J),G=a(942),H=a(882),K=a(28);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){var t=e.classes,a=(e.value,e.typePrice),n=e.addItemsToOrder,r=e.total,l=Object(m.useState)(""),c=s()(l,2),u=(c[0],c[1],Object(m.useState)(!1)),f=s()(u,2),b=f[0],g=f[1],v=Object(m.useState)(""),O=s()(v,2),w=(O[0],O[1]),C=Object(m.useState)(null),k=s()(C,2),_=k[0],q=k[1],D=Object(m.useState)(null),T=s()(D,2),B=T[0],J=T[1],K=Object(m.useState)(""),L=s()(K,2),Q=L[0],R=L[1],U=Object(m.useState)(0),V=s()(U,2),X=V[0],Y=V[1],Z=Object(m.useState)(0),ee=s()(Z,2),te=ee[0],ae=ee[1],ne=Object(m.useState)({}),re=s()(ne,2),le=re[0],oe=re[1];Object(m.useEffect)((function(){var e=setTimeout((function(){if(!Q)return R(""),ce(),null;var e=Q,t=1==B.own_product?parseFloat(B.stock):1e8,a=Q%B.interval_quantity;Q<=t&&0!=a?e=Q-a:Q>t&&(e=t),e!=Q&&R(e),ce()}),750);return function(){return clearTimeout(e)}}),[Q]),Object(m.useEffect)((function(){X>0&&ce()}),[X]);var ce=function(){if(!B)return null;var e=0,t="m"==a?B.price_unit:B.price_min;parseFloat(Q)&&(e=Q*t),parseFloat(X)&&(e-=X*Q*t/100),ae(e.toFixed(2))},ie=function(){g(!0)},ue=function(){g(!1)},se=function(){var e=i()(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(t),e.next=3,G.f.show(t.value);case 3:a=e.sent,J(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=i()(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<3)){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,G.f.paginated({search:t});case 5:return a=e.sent,n=a.data.map((function(e){return{value:e.id,label:e.text}})),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return p.a.createElement(p.a.Fragment,null,p.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:ie},"+ Agregar productos"),p.a.createElement(h.a,{fullScreen:!0,onClose:ie,open:b,"aria-labelledby":"form-dialog-title"},p.a.createElement(E.a,{className:t.appBar},p.a.createElement(N.a,null,p.a.createElement(A.a,{color:"inherit",onClick:ue,"aria-label":"Close"},p.a.createElement($.a,null)),p.a.createElement(W.a,{variant:"h6",color:"inherit",className:t.flex},"Agregar Productos"),p.a.createElement(d.a,{color:"inherit",onClick:ue},"Terminar"))),p.a.createElement(S.a,{id:"form-dialog-title"},"Productos"),p.a.createElement(x.a,null,p.a.createElement(j.a,null),p.a.createElement(H.a,{inputProps:{autoComplete:"off",autoCorrect:"off",spellCheck:"off"},autoFocus:!0,cacheOptions:!0,defaultOptions:!0,value:_,loadOptions:me,onInputChange:function(e){w(e)},onChange:se,placeholder:"Busque un producto"}),B&&p.a.createElement(P.a,{container:!0,className:t.grid,spacing:24},p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Stock: ",1==B.own_product?B.stock:"âˆž"," ")),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Se vende por: ",B.interval_quantity)),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Bulto: ",B.bulto)),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(F.a,{className:t.info},"Precio: $","m"==a?B.price_unit:B.price_min)),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(I.D,{htmlFor:"quantity"},"Cantidad"," ",p.a.createElement("span",null)),p.a.createElement(I.A,{error:!!le.quantity,name:"quantity",type:"number",value:Q,autoComplete:"off",onChange:function(e){return R(e.target.value)},fullWidth:!0})),p.a.createElement(P.a,{item:!0,xs:6,sm:3},p.a.createElement(I.D,{htmlFor:"discount"},"Descuento %"," ",p.a.createElement("span",null)),p.a.createElement(I.A,{name:"discount",type:"number",min:1,step:1,max:100,value:X,autoComplete:"off",onChange:function(e){return Y(e.target.value)},fullWidth:!0})),p.a.createElement(P.a,{item:!0,xs:12,sm:3},p.a.createElement("h3",null,"Subtotal: $ ",te," ")),p.a.createElement(P.a,{item:!0,xs:12,sm:3},p.a.createElement(d.a,{fullWidth:!0,variant:"contained",color:"primary",size:"large",onClick:function(){if(te<=0)return oe(M({},le,{subtotal:!0})),null;if(Q<=0||""==Q)return oe(M({},le,{quantity:!0})),null;var e={id_product:B.id,name:B.name,quantity:Q,discount:X,price_unit:"m"==a?B.price_unit:B.price_min,price_final:te};n(e),J(null),q(null),R(""),Y(""),ae(0)}},p.a.createElement(z.a,null),"Agregar")))),p.a.createElement(y.a,{className:t.dialogFooter},p.a.createElement("h3",null,"Total pedido: $ ",r," "))))};Q.propTypes={};t.default=Object(K.withStyles)((function(e){return{appBar:{position:"relative"},dialogFooter:{margin:0,justifyContent:"center",backgroundColor:e.palette.text.secondary,color:"white",padding:"16px 4px"},flex:{flex:1},formControl:{minWidth:"100%"},grid:{margin:"4px -12px",width:"unset"},info:{padding:"4px",textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",fontWeight:"bold"},required:{color:e.palette.error.main}}}))(Q)}}]);