(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{984:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),i=a(5),o=a.n(i),s=a(35),c=a.n(s),l=a(54),u=a.n(l),m=a(31),p=a.n(m),d=a(0),w=a.n(d),g=a(899),f=a(148),b=a(147),h=a(21),v=a(28),E=a(884),y=a(885),O=a(105),S=a(61),j=a(204),x=a(43);t.default=Object(v.withStyles)((function(e){return{formGroup:{padding:2*e.spacing.unit,paddingTop:0}}}))((function(e){var t=Object(d.useState)(!1),a=p()(t,2),n=a[0],i=a[1],s=Object(d.useState)({}),l=p()(s,2),m=l[0],v=l[1],P=Object(d.useState)(""),_=p()(P,2),k=_[0],C=_[1],L=Object(d.useState)(!1),T=p()(L,2),G=T[0],N=T[1],q=Object(d.useState)(!1),A=p()(q,2),J=A[0],I=A[1],W=function(){var t=u()(c.a.mark((function t(a,n){var r,o,s,l,u,m,p,w;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.setSubmitting,o=n.setErrors,r(!1),i(!0),t.prev=3,s=Object(d.useContext)(x.a),l=s.authenticate,u=e.match,m=u.params.token,t.next=9,axios.patch("api/v1/auth/password/reset/".concat(m),a);case 9:return p=t.sent,t.next=12,l(JSON.stringify(p.data));case 12:i(!1),t.next=24;break;case 15:if(t.prev=15,t.t0=t.catch(3),t.t0.response){t.next=21;break}return i(!1),v({type:"error",title:"Something went wrong",body:"Oops? Something went wrong here. Please try again.",action:function(){return window.location.reload()}}),t.abrupt("return");case 21:(w=t.t0.response.data.errors)&&o(w),i(!1);case 24:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,a){return t.apply(this,arguments)}}();Object(d.useEffect)((function(){if(""!==k){var t=e.location,a=S.a(t.search);a.hasOwnProperty("email")&&C(a.email)}}));var V=e.classes,z=o()(e,["classes"]);return w.a.createElement(j.a,r()({},z,{title:Lang.get("navigation.password_reset_title"),subTitle:"",loading:n,message:m}),w.a.createElement(f.b,{initialValues:{password:"",password_confirmation:""},onSubmit:W,validationSchema:b.object().shape({password:b.string().required(Lang.get("validation.required",{attribute:"password"})).min(8,Lang.get("validation.min.string",{attribute:"password",min:8})).oneOf([b.ref("password_confirmation"),null],Lang.get("validation.confirmed",{attribute:"password"})),password_confirmation:b.string().required(Lang.get("validation.required",{attribute:"password confirmation"})).min(8,Lang.get("validation.min.string",{attribute:"password confirmation",min:8}))})},(function(e){var t=e.values,a=e.handleChange,n=e.errors,i=e.submitCount,o=e.isSubmitting;return w.a.createElement(f.a,{autoComplete:"off"},w.a.createElement(h.u,{container:!0,direction:"column"},w.a.createElement(h.u,{item:!0,className:V.formGroup},w.a.createElement(h.ib,{id:"password",type:G?"text":"password",label:"Password",value:t.password,onChange:a,variant:"outlined",fullWidth:!0,error:i>0&&n.hasOwnProperty("password"),helperText:i>0&&n.hasOwnProperty("password")&&n.password,InputProps:{endAdornment:w.a.createElement(h.A,{position:"end"},w.a.createElement(h.y,{"aria-label":"Toggle password visibility",onClick:function(){N(!G)}},G?w.a.createElement(E.a,null):w.a.createElement(y.a,null)))}})),w.a.createElement(h.u,{item:!0,className:V.formGroup},w.a.createElement(h.ib,{id:"password_confirmation",type:J?"text":"password",label:"Password Confirmation",value:t.password_confirmation,onChange:a,variant:"outlined",fullWidth:!0,error:i>0&&n.hasOwnProperty("password_confirmation"),helperText:i>0&&n.hasOwnProperty("password_confirmation")&&n.password_confirmation,InputProps:{endAdornment:w.a.createElement(h.A,{position:"end"},w.a.createElement(h.y,{"aria-label":"Toggle password visibility",onClick:function(){I(!J)}},J?w.a.createElement(E.a,null):w.a.createElement(y.a,null)))}})),w.a.createElement(h.u,{item:!0,className:V.formGroup},w.a.createElement(h.E,{component:function(e){return w.a.createElement(g.a,r()({},e,{to:{search:S.b({username:k}),pathname:O.a("auth.signin")}}))}},Lang.get("navigation.signin")))),w.a.createElement(h.u,{container:!0,justify:"space-between"},w.a.createElement(h.u,{item:!0}),w.a.createElement(h.u,{item:!0,className:V.formGroup},w.a.createElement(h.c,{type:"submit",variant:"contained",color:"primary",disabled:n&&Object.keys(n).length>0&&i>0||o},Lang.get("navigation.reset")))))})))}))}}]);